#!/bin/bash

cd ~/Projects || exit
selected=$(find . -maxdepth 1 -type d | sed 's|^\./||' | fzf)
[ -z "$selected" ] && exit 0

session_name="$selected"

# Create session if it doesn't exist
if ! zellij list-sessions 2>/dev/null | grep -q "^$session_name "; then
    cd "$HOME/Projects/$selected" || exit
    zellij -s "$session_name" -d  # create in background
fi

# Switch to it
zellij attach "$session_name"
